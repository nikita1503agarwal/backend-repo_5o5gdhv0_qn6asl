{% extends 'base.html' %}
{% block content %}
  <section class="admin">
    <h1>Admin</h1>
    {% if not logged_in %}
      <form action="{{ url_for('admin_login') }}" method="post" class="card">
        <label>Password</label>
        <input type="password" name="password" placeholder="Enter password (default: sonicwave)" />
        <button type="submit">Login</button>
        {% if message %}<div class="msg">{{ message }}</div>{% endif %}
      </form>
    {% else %}
      <div class="admin-actions">
        <form action="{{ url_for('admin_rescan') }}" method="post">
          <button type="submit">Rescan Folder / Rebuild Structures</button>
        </form>
      </div>
      <div class="songs-admin-list">
        {% for s in songs %}
          <form class="song-row" action="{{ url_for('admin_edit_song', song_id=s.song_id) }}" method="post">
            <input name="title" value="{{ s.title }}" />
            <input name="artist" value="{{ s.artist }}" />
            <input name="album" value="{{ s.album }}" />
            <input name="genre" value="{{ s.genre }}" />
            <input name="year" value="{{ s.year }}" />
            <button>Save</button>
            <form action="{{ url_for('admin_delete_song', song_id=s.song_id) }}" method="post">
              <button class="danger">Delete</button>
            </form>
          </form>
        {% endfor %}
      </div>
    {% endif %}
  </section>
{% endblock %}
